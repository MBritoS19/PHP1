<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
    <!-- 2024-09-24 Tue 16:06 -->
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>&lrm;</title>
    <meta name="author" content="Mauro Jacob Honorato" />
    <meta name="generator" content="Org Mode" />
    <style>
        #content {
            max-width: 60em;
            margin: auto;
        }

        .title {
            text-align: center;
            margin-bottom: .2em;
        }

        .subtitle {
            text-align: center;
            font-size: medium;
            font-weight: bold;
            margin-top: 0;
        }

        .todo {
            font-family: monospace;
            color: red;
        }

        .done {
            font-family: monospace;
            color: green;
        }

        .priority {
            font-family: monospace;
            color: orange;
        }

        .tag {
            background-color: #eee;
            font-family: monospace;
            padding: 2px;
            font-size: 80%;
            font-weight: normal;
        }

        .timestamp {
            color: #bebebe;
        }

        .timestamp-kwd {
            color: #5f9ea0;
        }

        .org-right {
            margin-left: auto;
            margin-right: 0px;
            text-align: right;
        }

        .org-left {
            margin-left: 0px;
            margin-right: auto;
            text-align: left;
        }

        .org-center {
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }

        .underline {
            text-decoration: underline;
        }

        #postamble p,
        #preamble p {
            font-size: 90%;
            margin: .2em;
        }

        p.verse {
            margin-left: 3%;
        }

        pre {
            border: 1px solid #e6e6e6;
            border-radius: 3px;
            background-color: #f2f2f2;
            padding: 8pt;
            font-family: monospace;
            overflow: auto;
            margin: 1.2em;
        }

        pre.src {
            position: relative;
            overflow: auto;
        }

        pre.src:before {
            display: none;
            position: absolute;
            top: -8px;
            right: 12px;
            padding: 3px;
            color: #555;
            background-color: #f2f2f299;
        }

        pre.src:hover:before {
            display: inline;
            margin-top: 14px;
        }

        /* Languages per Org manual */
        pre.src-asymptote:before {
            content: 'Asymptote';
        }

        pre.src-awk:before {
            content: 'Awk';
        }

        pre.src-authinfo::before {
            content: 'Authinfo';
        }

        pre.src-C:before {
            content: 'C';
        }

        /* pre.src-C++ doesn't work in CSS */
        pre.src-clojure:before {
            content: 'Clojure';
        }

        pre.src-css:before {
            content: 'CSS';
        }

        pre.src-D:before {
            content: 'D';
        }

        pre.src-ditaa:before {
            content: 'ditaa';
        }

        pre.src-dot:before {
            content: 'Graphviz';
        }

        pre.src-calc:before {
            content: 'Emacs Calc';
        }

        pre.src-emacs-lisp:before {
            content: 'Emacs Lisp';
        }

        pre.src-fortran:before {
            content: 'Fortran';
        }

        pre.src-gnuplot:before {
            content: 'gnuplot';
        }

        pre.src-haskell:before {
            content: 'Haskell';
        }

        pre.src-hledger:before {
            content: 'hledger';
        }

        pre.src-java:before {
            content: 'Java';
        }

        pre.src-js:before {
            content: 'Javascript';
        }

        pre.src-latex:before {
            content: 'LaTeX';
        }

        pre.src-ledger:before {
            content: 'Ledger';
        }

        pre.src-lisp:before {
            content: 'Lisp';
        }

        pre.src-lilypond:before {
            content: 'Lilypond';
        }

        pre.src-lua:before {
            content: 'Lua';
        }

        pre.src-matlab:before {
            content: 'MATLAB';
        }

        pre.src-mscgen:before {
            content: 'Mscgen';
        }

        pre.src-ocaml:before {
            content: 'Objective Caml';
        }

        pre.src-octave:before {
            content: 'Octave';
        }

        pre.src-org:before {
            content: 'Org mode';
        }

        pre.src-oz:before {
            content: 'OZ';
        }

        pre.src-plantuml:before {
            content: 'Plantuml';
        }

        pre.src-processing:before {
            content: 'Processing.js';
        }

        pre.src-python:before {
            content: 'Python';
        }

        pre.src-R:before {
            content: 'R';
        }

        pre.src-ruby:before {
            content: 'Ruby';
        }

        pre.src-sass:before {
            content: 'Sass';
        }

        pre.src-scheme:before {
            content: 'Scheme';
        }

        pre.src-screen:before {
            content: 'Gnu Screen';
        }

        pre.src-sed:before {
            content: 'Sed';
        }

        pre.src-sh:before {
            content: 'shell';
        }

        pre.src-sql:before {
            content: 'SQL';
        }

        pre.src-sqlite:before {
            content: 'SQLite';
        }

        /* additional languages in org.el's org-babel-load-languages alist */
        pre.src-forth:before {
            content: 'Forth';
        }

        pre.src-io:before {
            content: 'IO';
        }

        pre.src-J:before {
            content: 'J';
        }

        pre.src-makefile:before {
            content: 'Makefile';
        }

        pre.src-maxima:before {
            content: 'Maxima';
        }

        pre.src-perl:before {
            content: 'Perl';
        }

        pre.src-picolisp:before {
            content: 'Pico Lisp';
        }

        pre.src-scala:before {
            content: 'Scala';
        }

        pre.src-shell:before {
            content: 'Shell Script';
        }

        pre.src-ebnf2ps:before {
            content: 'ebfn2ps';
        }

        /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
        pre.src-cpp:before {
            content: 'C++';
        }

        pre.src-abc:before {
            content: 'ABC';
        }

        pre.src-coq:before {
            content: 'Coq';
        }

        pre.src-groovy:before {
            content: 'Groovy';
        }

        /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
        pre.src-bash:before {
            content: 'bash';
        }

        pre.src-csh:before {
            content: 'csh';
        }

        pre.src-ash:before {
            content: 'ash';
        }

        pre.src-dash:before {
            content: 'dash';
        }

        pre.src-ksh:before {
            content: 'ksh';
        }

        pre.src-mksh:before {
            content: 'mksh';
        }

        pre.src-posh:before {
            content: 'posh';
        }

        /* Additional Emacs modes also supported by the LaTeX listings package */
        pre.src-ada:before {
            content: 'Ada';
        }

        pre.src-asm:before {
            content: 'Assembler';
        }

        pre.src-caml:before {
            content: 'Caml';
        }

        pre.src-delphi:before {
            content: 'Delphi';
        }

        pre.src-html:before {
            content: 'HTML';
        }

        pre.src-idl:before {
            content: 'IDL';
        }

        pre.src-mercury:before {
            content: 'Mercury';
        }

        pre.src-metapost:before {
            content: 'MetaPost';
        }

        pre.src-modula-2:before {
            content: 'Modula-2';
        }

        pre.src-pascal:before {
            content: 'Pascal';
        }

        pre.src-ps:before {
            content: 'PostScript';
        }

        pre.src-prolog:before {
            content: 'Prolog';
        }

        pre.src-simula:before {
            content: 'Simula';
        }

        pre.src-tcl:before {
            content: 'tcl';
        }

        pre.src-tex:before {
            content: 'TeX';
        }

        pre.src-plain-tex:before {
            content: 'Plain TeX';
        }

        pre.src-verilog:before {
            content: 'Verilog';
        }

        pre.src-vhdl:before {
            content: 'VHDL';
        }

        pre.src-xml:before {
            content: 'XML';
        }

        pre.src-nxml:before {
            content: 'XML';
        }

        /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
        pre.src-conf:before {
            content: 'Configuration File';
        }

        table {
            border-collapse: collapse;
        }

        caption.t-above {
            caption-side: top;
        }

        caption.t-bottom {
            caption-side: bottom;
        }

        td,
        th {
            vertical-align: top;
        }

        th.org-right {
            text-align: center;
        }

        th.org-left {
            text-align: center;
        }

        th.org-center {
            text-align: center;
        }

        td.org-right {
            text-align: right;
        }

        td.org-left {
            text-align: left;
        }

        td.org-center {
            text-align: center;
        }

        dt {
            font-weight: bold;
        }

        .footpara {
            display: inline;
        }

        .footdef {
            margin-bottom: 1em;
        }

        .figure {
            padding: 1em;
        }

        .figure p {
            text-align: center;
        }

        .equation-container {
            display: table;
            text-align: center;
            width: 100%;
        }

        .equation {
            vertical-align: middle;
        }

        .equation-label {
            display: table-cell;
            text-align: right;
            vertical-align: middle;
        }

        .inlinetask {
            padding: 10px;
            border: 2px solid gray;
            margin: 10px;
            background: #ffffcc;
        }

        #org-div-home-and-up {
            text-align: right;
            font-size: 70%;
            white-space: nowrap;
        }

        textarea {
            overflow-x: auto;
        }

        .linenr {
            font-size: smaller
        }

        .code-highlighted {
            background-color: #ffff00;
        }

        .org-info-js_info-navigation {
            border-style: none;
        }

        #org-info-js_console-label {
            font-size: 10px;
            font-weight: bold;
            white-space: nowrap;
        }

        .org-info-js_search-highlight {
            background-color: #ffff00;
            color: #000000;
            font-weight: bold;
        }

        .org-svg {
            width: 90%;
        }

        body {
            font-family: "Quicksand", sans-serif;
            font-optical-sizing: auto;
            font-weight: <weight>;
            font-style: normal;
        }

        pre {
            font-family: "Source Code Pro", monospace;
            font-optical-sizing: auto;
            font-weight: <weight>;
            font-style: normal;
        }

        h1,
        h2,
        h3 {
            font-family: "Roboto", sans-serif;
            font-weight: 700;
            font-style: normal;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap"
        rel="stylesheet">

</head>

<body>
    <div id="content" class="content">
        <div id="table-of-contents" role="doc-toc">
            <h2>Table of Contents</h2>
            <div id="text-table-of-contents" role="doc-toc">
                <ul>
                    <li><a href="#orgc3ce1e1">1. Administração de banco de dados</a></li>
                    <li><a href="#org925940c">2. Try/Catch</a>
                        <ul>
                            <li><a href="#orga81bc1b">2.1. Exercício</a></li>
                            <li><a href="#org3ae7766">2.2. Novas exceções</a></li>
                            <li><a href="#orgd69e563">2.3. Exercício</a></li>
                        </ul>
                    </li>
                    <li><a href="#orgb764d9e">3. Banco de Dados</a>
                        <ul>
                            <li><a href="#orgca8a238">3.1. Conexão</a></li>
                            <li><a href="#org2c3d129">3.2. Métodos mais comuns</a></li>
                            <li><a href="#org209c3a9">3.3. Executar instrução SQL</a></li>
                            <li><a href="#org377e1f7">3.4. Exercício</a></li>
                            <li><a href="#orgca2e73f">3.5. Usando o retorno</a></li>
                            <li><a href="#org4765e40">3.6. Exercício</a></li>
                            <li><a href="#org2076250">3.7. Preparando e executando</a></li>
                            <li><a href="#org0a16ed1">3.8. Exercício</a></li>
                            <li><a href="#org34caa3c">3.9. Fechando a conexão</a></li>
                            <li><a href="#org70ec457">3.10. Resumo</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

        <div id="outline-container-orgc3ce1e1" class="outline-2">
            <h2 id="orgc3ce1e1"><span class="section-number-2">1.</span> Administração de banco de dados</h2>
            <div class="outline-text-2" id="text-1">
                <p>
                    O phpMyAdmin é uma ferramenta que permite a administração de bancos de dados de forma visual.
                </p>

                <p>
                    Para acessá-lo, após iniciar os serviços Apache e Banco de Dados, use: <a
                        href="http:/localhost/phpmyadmin">http:/localhost/phpmyadmin</a>
                </p>

                <iframe width="950" height="594" src="https://www.youtube.com/embed/5P5p0BgDEiA" title="PHP Aula6 1"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
        </div>

        <div id="outline-container-org925940c" class="outline-2">
            <h2 id="org925940c"><span class="section-number-2">2.</span> Try/Catch</h2>
            <div class="outline-text-2" id="text-2">
                <p>
                    Usamos dois blocos try/catch para preparar o código para possíveis exceções. O bloco em try é
                    executado e nele pode existir código com possibilidade de exceção. No bloco catch fica o que fazer
                    caso aconteça a exceção.
                </p>

                <div class="org-src-container">
                    <pre class="src src-php">&lt;?php
try {
    $numero1 = 10;
    $numero2 = 0;
    $resultado = $numero1 / $numero2;
    echo "O resultado da divisão é: " . $resultado;
} catch (Exception $excecao) {
    echo "Erro: " . $excecao-&gt;getMessage();
}
</pre>
                </div>

                <p>
                    Exception é uma classe geral de erros, ela possui filhas e podemos buscar primeiro as filhas e pegar
                    também a geral se a exceção for diferente das filhas listadas:
                </p>

                <pre class="example">
&lt;?php
try {
    $numero1 = 10;
    $numero2 = 0;
    $resultado = $numero1 / $numero2;
    echo "O resultado da divisão é: " . $resultado;
} catch (DivisionByZeroError $divisaoErrada) {
    echo "Erro na divisão: " . $divisaoErrada-&gt;getMessage();
} catch (Exception $excecao) {
    echo "Erro: " . $excecao-&gt;getMessage();
} 
</pre>

                <p>
                    Mais tipos de exceção: <a href="https://www.php.net/manual/en/class.exception.php">aqui</a>. A ordem
                    dos catch é importante, as exceções mais genéricas devem ficar por último.
                </p>
            </div>

            <div id="outline-container-orga81bc1b" class="outline-3">
                <h3 id="orga81bc1b"><span class="section-number-3">2.1.</span> Exercício</h3>
                <div class="outline-text-3" id="text-2-1">
                    <ol class="org-ol">
                        <li value="1">Troque a ordem dos <code>catch</code> no código anterior, o que acontece?</li>
                    </ol>
                </div>
            </div>

            <div id="outline-container-org3ae7766" class="outline-3">
                <h3 id="org3ae7766"><span class="section-number-3">2.2.</span> Novas exceções</h3>
                <div class="outline-text-3" id="text-2-2">
                    <p>
                        Podemos criar nossas próprias exceções com objetos:
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">class MinhaExcecao extends Exception {
    // Construtor personalizado (opcional)
    public function __construct($mensagem = "", $codigo = 0, Throwable $anterior = null) {
	parent::__construct($mensagem, $codigo, $anterior);
    }
}
</pre>
                    </div>

                    <ul class="org-ul">
                        <li>$mensagem: A mensagem de erro a ser exibida.</li>
                        <li>$codigo: Um código numérico que pode ser usado para identificar o tipo de exceção.</li>
                        <li>$anterior: Uma exceção anterior que causou esta exceção.</li>
                    </ul>

                    <p>
                        Podemos usar a nova exceção:
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">try {
    // Algum código que pode gerar uma exceção
    if ($idade &lt; 18) {
	throw new MinhaExcecao("Você deve ter mais de 18 anos.");
    }
} catch (MinhaExcecao $e) {
    echo "Erro: " . $e-&gt;getMessage();
}
</pre>
                    </div>
                </div>
            </div>

            <div id="outline-container-orgd69e563" class="outline-3">
                <h3 id="orgd69e563"><span class="section-number-3">2.3.</span> Exercício</h3>
                <div class="outline-text-3" id="text-2-3">
                    <ol class="org-ol">
                        <li value="2">Crie um script PHP que permita ao usuário inserir dois números e realizar as
                            quatro operações básicas (adição, subtração, multiplicação e divisão). Utilize try-catch
                            para tratar as seguintes exceções:</li>
                    </ol>


                    <ul class="org-ul">
                        <li><b>Divisão por zero</b>: Exibir uma mensagem amigável informando o erro.</li>
                        <li><b>Entrada de dados inválidos</b>: Verificar se os valores inseridos são números e, caso
                            contrário, lançar uma exceção personalizada.</li>
                        <li><b>Outras exceções</b>: Capturar qualquer outra exceção que possa ocorrer e exibir uma
                            mensagem genérica.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="outline-container-orgb764d9e" class="outline-2">
            <h2 id="orgb764d9e"><span class="section-number-2">3.</span> Banco de Dados</h2>
            <div class="outline-text-2" id="text-3">
                <p>
                    Acessar bancos de dados é uma tarefa fundamental para a maioria das aplicações web.
                </p>

                <dl class="org-dl">
                    <dt>mysqli</dt>
                    <dd>A extensão mysqli permite a você acessar a funcionalidade provida pelo MySQL.</dd>

                    <dt>PDO</dt>
                    <dd>A extensão PHP Data Objects (PDO) define uma interface leve e consistente para acessar <a
                            href="https://www.php.net/manual/pt_BR/pdo.drivers.php">vários</a> bancos de dados no PHP.
                    </dd>
                </dl>

                <p>
                    Vamos trabalhar com o mais novo apenas: PDO.
                </p>
            </div>

            <div id="outline-container-orgca8a238" class="outline-3">
                <h3 id="orgca8a238"><span class="section-number-3">3.1.</span> Conexão</h3>
                <div class="outline-text-3" id="text-3-1">
                    <p>
                        Para criar um novo objeto PDO para gerenciar a conexão com o banco de dados usamos:
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">&lt;?php
$dsn = "mysql:host=seu_servidor;dbname=seu_banco_de_dados";
$user = "seu_usuario";
$password = "sua_senha";

try {
    $conexao = new PDO($dsn, $user, $password);
} catch (PDOException $excecao) {
    echo "Erro de conexão: " . $excecao-&gt;getMessage();
}
?&gt;
</pre>
                    </div>

                    <dl class="org-dl">
                        <dt>seu_servidor</dt>
                        <dd>url onde o banco de dados está. Exemplo: localhost.</dd>
                        <dt>seu_banco_de_dados</dt>
                        <dd>nome do banco de dados.</dd>
                        <dt>seu_usuario</dt>
                        <dd>o usuário que executará os comandos. Exemplo: root.</dd>
                        <dt>sua_senha</dt>
                        <dd>a senha do usuário. Usando XAMPP deixe vazio: <code>''</code>;</dd>
                    </dl>

                    <p>
                        Se tudo der certo, $conexao guarda o objeto onde serão executado os métodos no banco:
                    </p>
                </div>
            </div>

            <div id="outline-container-org2c3d129" class="outline-3">
                <h3 id="org2c3d129"><span class="section-number-3">3.2.</span> Métodos mais comuns</h3>
                <div class="outline-text-3" id="text-3-2">
                    <ul class="org-ul">
                        <li>$conexao-&gt;exec()</li>
                        <li>$conexao-&gt;query()</li>
                        <li>$conexao-&gt;prepare()</li>
                        <li>$conexao-&gt;execute()</li>
                        <li>$conexao-&gt;fetch()</li>
                        <li>$conexao-&gt;fetchAll()</li>
                        <li>$conexao-&gt;close()</li>
                    </ul>
                </div>
            </div>

            <div id="outline-container-org209c3a9" class="outline-3">
                <h3 id="org209c3a9"><span class="section-number-3">3.3.</span> Executar instrução SQL</h3>
                <div class="outline-text-3" id="text-3-3">
                    <p>
                        Usamos $conexao-&gt;exec() para executar instruções SQL que não retornam um conjunto de
                        resultados, como INSERT, UPDATE, DELETE, etc.
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">$conexao-&gt;exec("DELETE FROM usuarios WHERE id = 1");
</pre>
                    </div>

                    <p>
                        Retorna um objeto PDOStatement ou false se o comando falhar.
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">$resultado = $conexao-&gt;exec("DELETE FROM usuarios WHERE id = 1");

if($resultado) {
  echo "Usuário apagado!";
} else {
  echo "Erro ao apagar usuário";
}
</pre>
                    </div>
                </div>
            </div>

            <div id="outline-container-org377e1f7" class="outline-3">
                <h3 id="org377e1f7"><span class="section-number-3">3.4.</span> Exercício</h3>
                <div class="outline-text-3" id="text-3-4">
                    <ol class="org-ol">
                        <li value="3">Usando phpmyadmin crie o banco aula6 e a tabela usuarios.</li>
                        <li>Crie um formulário para receber o nome do usuário e uma página PHP para inserir nome
                            recebido na tabela usuarios. Informe se o comando foi bem sucedido ou não.</li>
                    </ol>
                </div>
            </div>

            <div id="outline-container-orgca2e73f" class="outline-3">
                <h3 id="orgca2e73f"><span class="section-number-3">3.5.</span> Usando o retorno</h3>
                <div class="outline-text-3" id="text-3-5">
                    <p>
                        Podemos usar o método $conexao-&gt;query() para executar instruções SQL que retornam um conjunto
                        de resultados, como SELECT.
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">$resultado = $conexao-&gt;query("SELECT * FROM usuarios");
</pre>
                    </div>

                    <p>
                        Em $resultado temos uma matriz com a tabela usuários.
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">var_dump($resultado);
</pre>
                    </div>

                    <p>
                        Podemos percorrer todos eles com <code>foreach</code>:
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">foreach($resultado as $linha) {
  echo $linha['nome'] . "&lt;br&gt;";
}
</pre>
                    </div>
                </div>
            </div>

            <div id="outline-container-org4765e40" class="outline-3">
                <h3 id="org4765e40"><span class="section-number-3">3.6.</span> Exercício</h3>
                <div class="outline-text-3" id="text-3-6">
                    <ol class="org-ol">
                        <li value="5">Crie uma página que lista todos os usuários da tabela usuarios.</li>
                        <li>Crie um formulário que recebe um nome, mostre todos os usuários da tabela usuarios que
                            possuem nome contendo o texto recebido.</li>
                    </ol>
                </div>
            </div>

            <div id="outline-container-org2076250" class="outline-3">
                <h3 id="org2076250"><span class="section-number-3">3.7.</span> Preparando e executando</h3>
                <div class="outline-text-3" id="text-3-7">
                    <p>
                        Para evitar injeção de SQL podemos usar:
                    </p>

                    <p>
                        <code>prepare()</code> em seguida <code>execute()</code>:
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">$comando = $conexao-&gt;prepare("SELECT * FROM usuarios WHERE nome = :nome");

$comando-&gt;execute([':nome' =&gt; 'João']);
</pre>
                    </div>

                    <p>
                        Agora precisamos buscar os itens do resultado:
                    </p>

                    <dl class="org-dl">
                        <dt>fetchAll()</dt>
                        <dd>cria um vetor com todos os itens.</dd>
                        <dt>fetch()</dt>
                        <dd>busca um item por vez.</dd>
                    </dl>

                    <div class="org-src-container">
                        <pre class="src src-php">$matriz = $comando-&gt;fetchAll();

foreach($matriz as $linha) {
  echo $linha['nome'];
}
</pre>
                    </div>

                    <p>
                        O equivalente em fetch():
                    </p>

                    <div class="org-src-container">
                        <pre class="src src-php">while($linha = $comando-&gt;fetch(PDO::FETCH_ASSOC)) {
  echo $linha['nome'];
}
</pre>
                    </div>

                    <p>
                        Existem vários parâmetros para <a
                            href="https://www.php.net/manual/en/pdostatement.fetch.php">fetch</a> dentre eles:
                    </p>

                    <dl class="org-dl">
                        <dt>PDO::FETCH_ASSOC</dt>
                        <dd>retorna um vetor indexado pelo nome da coluna na tabela SQL.</dd>
                        <dt>PDO::FETCH_NUM</dt>
                        <dd>retorna um vetor indexado pelo número da coluna no resultado.</dd>
                        <dt>PDO::FETCH_BOTH</dt>
                        <dd>retorna um vetor indexado por nome e número.</dd>
                    </dl>
                </div>
            </div>

            <div id="outline-container-org0a16ed1" class="outline-3">
                <h3 id="org0a16ed1"><span class="section-number-3">3.8.</span> Exercício</h3>
                <div class="outline-text-3" id="text-3-8">
                    <ol class="org-ol">
                        <li value="7">O que acontece se digitar '; DELETE FROM usuarios WHERE id=1; &#x2013; no campo
                            nome.</li>
                        <li>Altere o código do exercício 6 de maneira a evitar a injeção de código SQL.</li>
                    </ol>
                </div>
            </div>

            <div id="outline-container-org34caa3c" class="outline-3">
                <h3 id="org34caa3c"><span class="section-number-3">3.9.</span> Fechando a conexão</h3>
                <div class="outline-text-3" id="text-3-9">
                    <p>
                        Após encerrar o uso do banco de dados, use $conexao-&gt;close() para encerrar a conexão e
                        liberar recursos.
                    </p>
                </div>
            </div>

            <div id="outline-container-org70ec457" class="outline-3">
                <h3 id="org70ec457"><span class="section-number-3">3.10.</span> Resumo</h3>
                <div class="outline-text-3" id="text-3-10">
                    <p>
                        Para conectar ao banco use: <code>new PDO</code> e guarde o resultado que é a sua conexão com o
                        banco.
                    </p>

                    <p>
                        Se for executar um comando sem usar o resultado (INSERT, UPDATE, DELETE) use:
                        <code>exec()</code>.
                    </p>

                    <p>
                        Se for interessar o resultado use: query() para executar a instrução e busque o resultado
                        inteiro com <code>fetchAll()</code> ou linha a linha com <code>fetch()</code>.
                    </p>

                    <p>
                        Se parte do comando SQL for recebida de alguma maneira, use <code>prepare()</code> e
                        <code>execute()</code> no lugar de <code>query()</code>.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="postamble" class="status">
        <p class="author">Author: Mauro Jacob Honorato</p>
        <p class="date">Created: 2024-09-24 Tue 16:06</p>
        <p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
    </div>
</body>

</html>